(this["webpackJsonpsnapchat-clone"]=this["webpackJsonpsnapchat-clone"]||[]).push([[0],{60:function(e,t,c){},66:function(e,t,c){},71:function(e,t,c){},72:function(e,t,c){},77:function(e,t,c){},78:function(e,t,c){},79:function(e,t,c){},80:function(e,t,c){},81:function(e,t,c){"use strict";c.r(t);var a=c(2),n=c.n(a),s=c(27),i=c.n(s),r=(c(60),c(12)),o=c(45),l=c(6),j=(c(66),c(31)),u=c(111),d=c(97),b=c(98),h=c(99),m=c(34),p=Object(m.b)({name:"app",initialState:{user:null,selectedImage:null},reducers:{login:function(e,t){e.user=t.payload},logout:function(e){e.user=null},selectImage:function(e,t){e.selectedImage=t.payload},resetImage:function(e){e.selectedImage=null}}}),O=p.actions,f=O.login,g=O.logout,x=O.selectImage,v=(O.resetImage,function(e){return e.app.user}),w=function(e){return e.app.selectedImage},N=p.reducer,I=Object(m.b)({name:"camera",initialState:{cameraImage:null},reducers:{setCameraImage:function(e,t){e.cameraImage=t.payload},resetCameraImage:function(e){e.cameraImage=null}}}),_=I.actions,C=_.setCameraImage,k=_.resetCameraImage,S=function(e){return e.camera.cameraImage},y=I.reducer,P=c(32),B=P.a.initializeApp({apiKey:"AIzaSyB4PERXL31j_VKA_P8DyNv0pVBjSFrZ9lg",authDomain:"snapchat-clone-v1.firebaseapp.com",projectId:"snapchat-clone-v1",storageBucket:"snapchat-clone-v1.appspot.com",messagingSenderId:"658763905643",appId:"1:658763905643:web:305baf603ca237dd710f2e"}).firestore(),U=P.a.auth(),A=P.a.storage(),z=new P.a.auth.GoogleAuthProvider,E=(c(71),c(96)),F=c(53),R=(c(72),c(4)),D=function(e){var t=e.id,c=e.username,a=e.timestamp,n=e.read,s=e.imageUrl,i=e.profilePic,o=Object(r.b)(),j=Object(l.f)();return Object(R.jsxs)("div",{onClick:function(){n||(o(x(s)),B.collection("posts").doc(t).set({read:!0},{merge:!0}),j.push("/chats/view"))},className:"chat",children:[Object(R.jsx)(u.a,{className:"chat_avatar",src:i}),Object(R.jsxs)("div",{className:"chat_info",children:[Object(R.jsx)("h4",{children:c}),Object(R.jsxs)("p",{children:[!n&&"Tap to view - "," ",Object(R.jsx)(F.a,{date:new Date(null===a||void 0===a?void 0:a.toDate()).toUTCString()})]})]}),!n&&Object(R.jsx)(E.a,{className:"chat_readIcon"})]})},T=function(){var e=Object(a.useState)([]),t=Object(j.a)(e,2),c=t[0],n=t[1],s=Object(r.c)(v),i=Object(r.b)(),o=Object(l.f)();Object(a.useEffect)((function(){B.collection("posts").orderBy("timestamp","desc").onSnapshot((function(e){return n(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]);return Object(R.jsxs)("div",{className:"chats",children:[Object(R.jsxs)("div",{className:"chats_header",children:[Object(R.jsx)(u.a,{src:s.profilePic,onClick:function(){return U.signOut()},className:"chats_avatar"}),Object(R.jsxs)("div",{className:"chats_search",children:[Object(R.jsx)(d.a,{className:"chats_searchIcon"}),Object(R.jsx)("input",{placeholder:"Friends",type:"text"})]}),Object(R.jsx)(b.a,{className:"chats_chatIcon"})]}),Object(R.jsx)("div",{className:"chats_posts",children:c.map((function(e){var t=e.id,c=e.data,a=c.profilePic,n=c.username,s=c.timestamp,i=c.imageUrl,r=c.read;return Object(R.jsx)(D,{id:t,username:n,timestamp:s,imageUrl:i,read:r,profilePic:a},t)}))}),Object(R.jsx)(h.a,{className:"chats_takePicIcon",onClick:function(){i(k()),o.push("/")},fontSize:"large"})]})},V=c(51),L=(c(77),function(){var e=Object(r.c)(w),t=Object(l.f)();Object(a.useEffect)((function(){e||c()}),[e]);var c=function(){t.replace("/chats")};return Object(R.jsxs)("div",{className:"chatView",children:[Object(R.jsx)("img",{src:e,alt:"",onClick:c}),Object(R.jsx)("div",{className:"chatView_timer",children:Object(R.jsx)(V.CountdownCircleTimer,{isPlaying:!0,duration:10,strokeWidth:6,size:50,colors:[["#004777",.333],["#F7B801",.333],["#A30000",.333]],children:function(e){var t=e.remainingTime;return 0===t&&c(),t}})})]})}),W=c(109),J=(c(78),function(){var e=Object(r.b)();return Object(R.jsx)("div",{className:"login",children:Object(R.jsxs)("div",{className:"login_container",children:[Object(R.jsx)("img",{src:"https://scx2.b-cdn.net/gfx/news/2017/1-snapchat.jpg",alt:""}),Object(R.jsx)(W.a,{variant:"outlined",onClick:function(){U.signInWithPopup(z).then((function(t){e(f({username:t.user.displayName,profilePic:t.user.photoURL,id:t.user.uid}))})).catch((function(e){return alert(e.message)}))},children:"Sign In"})]})})}),K=c(100),M=c(101),G=c(102),X=c(103),Z=c(104),$=c(105),q=c(106),H=c(107),Q=c(108),Y=(c(79),c(110)),ee=function(){var e=Object(r.c)(S),t=Object(l.f)(),c=Object(r.b)(),n=Object(r.c)(v);Object(a.useEffect)((function(){e||t.replace("/")}),[e,t]);return Object(R.jsxs)("div",{className:"preview",children:[Object(R.jsx)(K.a,{className:"preview_close",onClick:function(){c(k())}}),Object(R.jsxs)("div",{className:"preview_toolbarRight",children:[Object(R.jsx)(M.a,{}),Object(R.jsx)(G.a,{}),Object(R.jsx)(X.a,{}),Object(R.jsx)(Z.a,{}),Object(R.jsx)($.a,{}),Object(R.jsx)(q.a,{}),Object(R.jsx)(H.a,{})]}),Object(R.jsx)("img",{src:e,alt:""}),Object(R.jsxs)("div",{onClick:function(){var c=Object(Y.a)();A.ref("posts/".concat(c)).putString(e,"data_url").on("state_changed",null,(function(e){console.log(e)}),(function(){A.ref("posts").child(c).getDownloadURL().then((function(e){B.collection("posts").add({imageUrl:e,username:"Abhi",read:!1,profilePic:n.profilePic,timestamp:P.a.firestore.FieldValue.serverTimestamp()}),t.replace("/chats")}))}))},className:"preview_footer",children:[Object(R.jsx)("h2",{children:"Send Now"}),Object(R.jsx)(Q.a,{fontSize:"small",className:"preview_sendIcon"})]})]})},te=c(52),ce=c.n(te),ae=(c(80),{width:250,height:400,facingMode:"user"}),ne=function(){var e=Object(a.useRef)(null),t=Object(r.b)(),c=Object(l.f)(),n=Object(a.useCallback)((function(){var a=e.current.getScreenshot();t(C(a)),c.push("/preview")}),[e]);return Object(R.jsxs)("div",{className:"webcamCapture",children:[Object(R.jsx)(ce.a,{audio:!1,height:ae.height,ref:e,screenshotFormat:"image/jpeg",width:ae.width,videoConstraints:ae}),Object(R.jsx)(h.a,{className:"webcamCapture_button",onClick:n,fontSize:"large"})]})};var se=function(){var e=Object(r.c)(v),t=Object(r.b)();return Object(a.useEffect)((function(){U.onAuthStateChanged((function(e){t(e?f({username:e.displayName,profilePic:e.photoURL,id:e.uid}):g())}))}),[]),Object(R.jsx)("div",{className:"app",children:Object(R.jsx)(o.a,{children:e?Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)("img",{className:"app_logo",src:"https://lakeridgenewsonline.com/wp-content/uploads/2020/04/snapchat.jpg",alt:""}),Object(R.jsx)("div",{className:"app_body",children:Object(R.jsx)("div",{className:"app_bodyBackground",children:Object(R.jsxs)(l.c,{children:[Object(R.jsx)(l.a,{exact:!0,path:"/",children:Object(R.jsx)(ne,{})}),Object(R.jsx)(l.a,{path:"/preview",children:Object(R.jsx)(ee,{})}),Object(R.jsx)(l.a,{exact:!0,path:"/chats",children:Object(R.jsx)(T,{})}),Object(R.jsx)(l.a,{path:"/chats/view",children:Object(R.jsx)(L,{})})]})})})]}):Object(R.jsx)(J,{})})})},ie=Object(m.a)({reducer:{app:N,camera:y}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(R.jsx)(n.a.StrictMode,{children:Object(R.jsx)(r.a,{store:ie,children:Object(R.jsx)(se,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[81,1,2]]]);
//# sourceMappingURL=main.f73194a8.chunk.js.map