(this["webpackJsonpsnapchat-clone"]=this["webpackJsonpsnapchat-clone"]||[]).push([[0],{60:function(e,t,c){},66:function(e,t,c){},71:function(e,t,c){},72:function(e,t,c){},77:function(e,t,c){},78:function(e,t,c){},79:function(e,t,c){},80:function(e,t,c){},81:function(e,t,c){"use strict";c.r(t);var a=c(2),n=c.n(a),s=c(27),i=c.n(s),r=(c(60),c(12)),o=c(45),l=c(6),j=(c(66),c(31)),u=c(111),d=c(97),b=c(98),h=c(99),m=c(34),p=Object(m.b)({name:"app",initialState:{user:null,selectedImage:null},reducers:{login:function(e,t){e.user=t.payload},logout:function(e){e.user=null},selectImage:function(e,t){e.selectedImage=t.payload},resetImage:function(e){e.selectedImage=null}}}),O=p.actions,f=O.login,g=O.logout,x=O.selectImage,v=(O.resetImage,function(e){return e.app.user}),w=function(e){return e.app.selectedImage},N=p.reducer,I=Object(m.b)({name:"camera",initialState:{cameraImage:null},reducers:{setCameraImage:function(e,t){e.cameraImage=t.payload},resetCameraImage:function(e){e.cameraImage=null}}}),C=I.actions,_=C.setCameraImage,k=C.resetCameraImage,S=function(e){return e.camera.cameraImage},y=I.reducer,P=c(32),U=P.a.initializeApp({apiKey:"AIzaSyBrCKCdOxVZZIMZTurSocfSZk1kUUSBzfk",authDomain:"snapchat-clonereact.firebaseapp.com",projectId:"snapchat-clonereact",storageBucket:"snapchat-clonereact.appspot.com",messagingSenderId:"142262303126",appId:"1:142262303126:web:67797bcf4bf504cb3305b7",measurementId:"G-VNQXSHWZV9"}).firestore(),B=P.a.auth(),z=P.a.storage(),A=new P.a.auth.GoogleAuthProvider,T=(c(71),c(96)),V=c(53),E=(c(72),c(4)),F=function(e){var t=e.id,c=e.username,a=e.timestamp,n=e.read,s=e.imageUrl,i=e.profilePic,o=Object(r.b)(),j=Object(l.f)();return Object(E.jsxs)("div",{onClick:function(){n||(o(x(s)),U.collection("posts").doc(t).set({read:!0},{merge:!0}),j.push("/chats/view"))},className:"chat",children:[Object(E.jsx)(u.a,{className:"chat_avatar",src:i}),Object(E.jsxs)("div",{className:"chat_info",children:[Object(E.jsx)("h4",{children:c}),Object(E.jsxs)("p",{children:[!n&&"Tap to view - "," ",Object(E.jsx)(V.a,{date:new Date(null===a||void 0===a?void 0:a.toDate()).toUTCString()})]})]}),!n&&Object(E.jsx)(T.a,{className:"chat_readIcon"})]})},R=function(){var e=Object(a.useState)([]),t=Object(j.a)(e,2),c=t[0],n=t[1],s=Object(r.c)(v),i=Object(r.b)(),o=Object(l.f)();Object(a.useEffect)((function(){U.collection("posts").orderBy("timestamp","desc").onSnapshot((function(e){return n(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]);return Object(E.jsxs)("div",{className:"chats",children:[Object(E.jsxs)("div",{className:"chats_header",children:[Object(E.jsx)(u.a,{src:s.profilePic,onClick:function(){return B.signOut()},className:"chats_avatar"}),Object(E.jsxs)("div",{className:"chats_search",children:[Object(E.jsx)(d.a,{className:"chats_searchIcon"}),Object(E.jsx)("input",{placeholder:"Friends",type:"text"})]}),Object(E.jsx)(b.a,{className:"chats_chatIcon"})]}),Object(E.jsx)("div",{className:"chats_posts",children:c.map((function(e){var t=e.id,c=e.data,a=c.profilePic,n=c.username,s=c.timestamp,i=c.imageUrl,r=c.read;return Object(E.jsx)(F,{id:t,username:n,timestamp:s,imageUrl:i,read:r,profilePic:a},t)}))}),Object(E.jsx)(h.a,{className:"chats_takePicIcon",onClick:function(){i(k()),o.push("/")},fontSize:"large"})]})},W=c(51),Z=(c(77),function(){var e=Object(r.c)(w),t=Object(l.f)();Object(a.useEffect)((function(){e||c()}),[e]);var c=function(){t.replace("/chats")};return Object(E.jsxs)("div",{className:"chatView",children:[Object(E.jsx)("img",{src:e,alt:"",onClick:c}),Object(E.jsx)("div",{className:"chatView_timer",children:Object(E.jsx)(W.CountdownCircleTimer,{isPlaying:!0,duration:10,strokeWidth:6,size:50,colors:[["#004777",.333],["#F7B801",.333],["#A30000",.333]],children:function(e){var t=e.remainingTime;return 0===t&&c(),t}})})]})}),D=c(109),L=(c(78),function(){var e=Object(r.b)();return Object(E.jsx)("div",{className:"login",children:Object(E.jsxs)("div",{className:"login_container",children:[Object(E.jsx)("img",{src:"https://scx2.b-cdn.net/gfx/news/2017/1-snapchat.jpg",alt:""}),Object(E.jsx)(D.a,{variant:"outlined",onClick:function(){B.signInWithPopup(A).then((function(t){e(f({username:t.user.displayName,profilePic:t.user.photoURL,id:t.user.uid}))})).catch((function(e){return alert(e.message)}))},children:"Sign In"})]})})}),M=c(100),G=c(101),J=c(102),K=c(103),H=c(104),Q=c(105),X=c(106),$=c(107),q=c(108),Y=(c(79),c(110)),ee=function(){var e=Object(r.c)(S),t=Object(l.f)(),c=Object(r.b)(),n=Object(r.c)(v);Object(a.useEffect)((function(){e||t.replace("/")}),[e,t]);return Object(E.jsxs)("div",{className:"preview",children:[Object(E.jsx)(M.a,{className:"preview_close",onClick:function(){c(k())}}),Object(E.jsxs)("div",{className:"preview_toolbarRight",children:[Object(E.jsx)(G.a,{}),Object(E.jsx)(J.a,{}),Object(E.jsx)(K.a,{}),Object(E.jsx)(H.a,{}),Object(E.jsx)(Q.a,{}),Object(E.jsx)(X.a,{}),Object(E.jsx)($.a,{})]}),Object(E.jsx)("img",{src:e,alt:""}),Object(E.jsxs)("div",{onClick:function(){var c=Object(Y.a)();z.ref("posts/".concat(c)).putString(e,"data_url").on("state_changed",null,(function(e){console.log(e)}),(function(){z.ref("posts").child(c).getDownloadURL().then((function(e){U.collection("posts").add({imageUrl:e,username:"Abhi",read:!1,profilePic:n.profilePic,timestamp:P.a.firestore.FieldValue.serverTimestamp()}),t.replace("/chats")}))}))},className:"preview_footer",children:[Object(E.jsx)("h2",{children:"Send Now"}),Object(E.jsx)(q.a,{fontSize:"small",className:"preview_sendIcon"})]})]})},te=c(52),ce=c.n(te),ae=(c(80),{width:250,height:400,facingMode:"user"}),ne=function(){var e=Object(a.useRef)(null),t=Object(r.b)(),c=Object(l.f)(),n=Object(a.useCallback)((function(){var a=e.current.getScreenshot();t(_(a)),c.push("/preview")}),[e]);return Object(E.jsxs)("div",{className:"webcamCapture",children:[Object(E.jsx)(ce.a,{audio:!1,height:ae.height,ref:e,screenshotFormat:"image/jpeg",width:ae.width,videoConstraints:ae}),Object(E.jsx)(h.a,{className:"webcamCapture_button",onClick:n,fontSize:"large"})]})};var se=function(){var e=Object(r.c)(v),t=Object(r.b)();return Object(a.useEffect)((function(){B.onAuthStateChanged((function(e){t(e?f({username:e.displayName,profilePic:e.photoURL,id:e.uid}):g())}))}),[]),Object(E.jsx)("div",{className:"app",children:Object(E.jsx)(o.a,{children:e?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)("img",{className:"app_logo",src:"https://lakeridgenewsonline.com/wp-content/uploads/2020/04/snapchat.jpg",alt:""}),Object(E.jsx)("div",{className:"app_body",children:Object(E.jsx)("div",{className:"app_bodyBackground",children:Object(E.jsxs)(l.c,{children:[Object(E.jsx)(l.a,{exact:!0,path:"/",children:Object(E.jsx)(ne,{})}),Object(E.jsx)(l.a,{path:"/preview",children:Object(E.jsx)(ee,{})}),Object(E.jsx)(l.a,{exact:!0,path:"/chats",children:Object(E.jsx)(R,{})}),Object(E.jsx)(l.a,{path:"/chats/view",children:Object(E.jsx)(Z,{})})]})})})]}):Object(E.jsx)(L,{})})})},ie=Object(m.a)({reducer:{app:N,camera:y}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(E.jsx)(n.a.StrictMode,{children:Object(E.jsx)(r.a,{store:ie,children:Object(E.jsx)(se,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[81,1,2]]]);
//# sourceMappingURL=main.27f44505.chunk.js.map