(this["webpackJsonpsnapchat-clone"]=this["webpackJsonpsnapchat-clone"]||[]).push([[0],{60:function(e,t,c){},66:function(e,t,c){},71:function(e,t,c){},72:function(e,t,c){},77:function(e,t,c){},78:function(e,t,c){},79:function(e,t,c){},80:function(e,t,c){},81:function(e,t,c){"use strict";c.r(t);var a=c(2),n=c.n(a),s=c(27),i=c.n(s),r=(c(60),c(12)),o=c(45),l=c(6),j=(c(66),c(31)),u=c(111),d=c(97),b=c(98),h=c(99),m=c(34),p=Object(m.b)({name:"app",initialState:{user:null,selectedImage:null},reducers:{login:function(e,t){e.user=t.payload},logout:function(e){e.user=null},selectImage:function(e,t){e.selectedImage=t.payload},resetImage:function(e){e.selectedImage=null}}}),O=p.actions,f=O.login,g=O.logout,x=O.selectImage,v=(O.resetImage,function(e){return e.app.user}),w=function(e){return e.app.selectedImage},N=p.reducer,I=Object(m.b)({name:"camera",initialState:{cameraImage:null},reducers:{setCameraImage:function(e,t){e.cameraImage=t.payload},resetCameraImage:function(e){e.cameraImage=null}}}),_=I.actions,C=_.setCameraImage,k=_.resetCameraImage,S=function(e){return e.camera.cameraImage},y=I.reducer,P=c(32),U=P.a.initializeApp({apiKey:"AIzaSyBUQqM66b_boWYXtYz98xNc4WkaxT6qZ1E",authDomain:"snapchatclone-react.firebaseapp.com",projectId:"snapchatclone-react",storageBucket:"snapchatclone-react.appspot.com",messagingSenderId:"689605344733",appId:"1:689605344733:web:e17496b4e0ca4c1311ca34",measurementId:"G-DW0ZQ5V856"}).firestore(),z=P.a.auth(),B=P.a.storage(),W=new P.a.auth.GoogleAuthProvider,A=(c(71),c(96)),E=c(53),T=(c(72),c(4)),D=function(e){var t=e.id,c=e.username,a=e.timestamp,n=e.read,s=e.imageUrl,i=e.profilePic,o=Object(r.b)(),j=Object(l.f)();return Object(T.jsxs)("div",{onClick:function(){n||(o(x(s)),U.collection("posts").doc(t).set({read:!0},{merge:!0}),j.push("/chats/view"))},className:"chat",children:[Object(T.jsx)(u.a,{className:"chat_avatar",src:i}),Object(T.jsxs)("div",{className:"chat_info",children:[Object(T.jsx)("h4",{children:c}),Object(T.jsxs)("p",{children:[!n&&"Tap to view - "," ",Object(T.jsx)(E.a,{date:new Date(null===a||void 0===a?void 0:a.toDate()).toUTCString()})]})]}),!n&&Object(T.jsx)(A.a,{className:"chat_readIcon"})]})},F=function(){var e=Object(a.useState)([]),t=Object(j.a)(e,2),c=t[0],n=t[1],s=Object(r.c)(v),i=Object(r.b)(),o=Object(l.f)();Object(a.useEffect)((function(){U.collection("posts").orderBy("timestamp","desc").onSnapshot((function(e){return n(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]);return Object(T.jsxs)("div",{className:"chats",children:[Object(T.jsxs)("div",{className:"chats_header",children:[Object(T.jsx)(u.a,{src:s.profilePic,onClick:function(){return z.signOut()},className:"chats_avatar"}),Object(T.jsxs)("div",{className:"chats_search",children:[Object(T.jsx)(d.a,{className:"chats_searchIcon"}),Object(T.jsx)("input",{placeholder:"Friends",type:"text"})]}),Object(T.jsx)(b.a,{className:"chats_chatIcon"})]}),Object(T.jsx)("div",{className:"chats_posts",children:c.map((function(e){var t=e.id,c=e.data,a=c.profilePic,n=c.username,s=c.timestamp,i=c.imageUrl,r=c.read;return Object(T.jsx)(D,{id:t,username:n,timestamp:s,imageUrl:i,read:r,profilePic:a},t)}))}),Object(T.jsx)(h.a,{className:"chats_takePicIcon",onClick:function(){i(k()),o.push("/")},fontSize:"large"})]})},R=c(51),V=(c(77),function(){var e=Object(r.c)(w),t=Object(l.f)();Object(a.useEffect)((function(){e||c()}),[e]);var c=function(){t.replace("/chats")};return Object(T.jsxs)("div",{className:"chatView",children:[Object(T.jsx)("img",{src:e,alt:"",onClick:c}),Object(T.jsx)("div",{className:"chatView_timer",children:Object(T.jsx)(R.CountdownCircleTimer,{isPlaying:!0,duration:10,strokeWidth:6,size:50,colors:[["#004777",.333],["#F7B801",.333],["#A30000",.333]],children:function(e){var t=e.remainingTime;return 0===t&&c(),t}})})]})}),L=c(109),M=(c(78),function(){var e=Object(r.b)();return Object(T.jsx)("div",{className:"login",children:Object(T.jsxs)("div",{className:"login_container",children:[Object(T.jsx)("img",{src:"https://scx2.b-cdn.net/gfx/news/2017/1-snapchat.jpg",alt:""}),Object(T.jsx)(L.a,{variant:"outlined",onClick:function(){z.signInWithPopup(W).then((function(t){e(f({username:t.user.displayName,profilePic:t.user.photoURL,id:t.user.uid}))})).catch((function(e){return alert(e.message)}))},children:"Sign In"})]})})}),q=c(100),G=c(101),J=c(102),Q=c(103),Y=c(104),Z=c(105),K=c(106),X=c(107),$=c(108),H=(c(79),c(110)),ee=function(){var e=Object(r.c)(S),t=Object(l.f)(),c=Object(r.b)(),n=Object(r.c)(v);Object(a.useEffect)((function(){e||t.replace("/")}),[e,t]);return Object(T.jsxs)("div",{className:"preview",children:[Object(T.jsx)(q.a,{className:"preview_close",onClick:function(){c(k())}}),Object(T.jsxs)("div",{className:"preview_toolbarRight",children:[Object(T.jsx)(G.a,{}),Object(T.jsx)(J.a,{}),Object(T.jsx)(Q.a,{}),Object(T.jsx)(Y.a,{}),Object(T.jsx)(Z.a,{}),Object(T.jsx)(K.a,{}),Object(T.jsx)(X.a,{})]}),Object(T.jsx)("img",{src:e,alt:""}),Object(T.jsxs)("div",{onClick:function(){var c=Object(H.a)();B.ref("posts/".concat(c)).putString(e,"data_url").on("state_changed",null,(function(e){console.log(e)}),(function(){B.ref("posts").child(c).getDownloadURL().then((function(e){U.collection("posts").add({imageUrl:e,username:"Abhi",read:!1,profilePic:n.profilePic,timestamp:P.a.firestore.FieldValue.serverTimestamp()}),t.replace("/chats")}))}))},className:"preview_footer",children:[Object(T.jsx)("h2",{children:"Send Now"}),Object(T.jsx)($.a,{fontSize:"small",className:"preview_sendIcon"})]})]})},te=c(52),ce=c.n(te),ae=(c(80),{width:250,height:400,facingMode:"user"}),ne=function(){var e=Object(a.useRef)(null),t=Object(r.b)(),c=Object(l.f)(),n=Object(a.useCallback)((function(){var a=e.current.getScreenshot();t(C(a)),c.push("/preview")}),[e]);return Object(T.jsxs)("div",{className:"webcamCapture",children:[Object(T.jsx)(ce.a,{audio:!1,height:ae.height,ref:e,screenshotFormat:"image/jpeg",width:ae.width,videoConstraints:ae}),Object(T.jsx)(h.a,{className:"webcamCapture_button",onClick:n,fontSize:"large"})]})};var se=function(){var e=Object(r.c)(v),t=Object(r.b)();return Object(a.useEffect)((function(){z.onAuthStateChanged((function(e){t(e?f({username:e.displayName,profilePic:e.photoURL,id:e.uid}):g())}))}),[]),Object(T.jsx)("div",{className:"app",children:Object(T.jsx)(o.a,{children:e?Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("img",{className:"app_logo",src:"https://lakeridgenewsonline.com/wp-content/uploads/2020/04/snapchat.jpg",alt:""}),Object(T.jsx)("div",{className:"app_body",children:Object(T.jsx)("div",{className:"app_bodyBackground",children:Object(T.jsxs)(l.c,{children:[Object(T.jsx)(l.a,{exact:!0,path:"/",children:Object(T.jsx)(ne,{})}),Object(T.jsx)(l.a,{path:"/preview",children:Object(T.jsx)(ee,{})}),Object(T.jsx)(l.a,{exact:!0,path:"/chats",children:Object(T.jsx)(F,{})}),Object(T.jsx)(l.a,{path:"/chats/view",children:Object(T.jsx)(V,{})})]})})})]}):Object(T.jsx)(M,{})})})},ie=Object(m.a)({reducer:{app:N,camera:y}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(T.jsx)(n.a.StrictMode,{children:Object(T.jsx)(r.a,{store:ie,children:Object(T.jsx)(se,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[81,1,2]]]);
//# sourceMappingURL=main.b9b0a5b6.chunk.js.map